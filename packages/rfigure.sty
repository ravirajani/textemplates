\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{rfigure}
\RequirePackage{caption}
\RequirePackage{subcaption}
\RequirePackage{floatrow}
\RequirePackage{kvoptions}


\SetupKeyvalOptions{
    family=RF,
    prefix=RF@
}

\DeclareStringOption[1.5ex plus 1.5ex minus .3ex]{labelsep}

\ProcessKeyvalOptions*

\newlength{\RF@customheadsep}
\setlength{\RF@customheadsep}{\RF@labelsep}

\DeclareCaptionLabelSeparator{capspace}{\hspace{\RF@customheadsep}}
\floatsetup[figure]{capposition=bottom}
\captionsetup[figure]{font=small,labelfont=bf,labelsep=capspace}
\DeclareCaptionSubType[alph]{figure}
\captionsetup[subfigure]{labelformat=parens,labelfont=normalfont,labelsep=space}
\numberwithin{figure}{section}

\DeclareNewFloatType{algorithm}{name=Algorithm}
\DeclareFloatVCode{algprecode}{\par\hrule height .8pt\vskip2pt\par}
\DeclareFloatVCode{algmidcode}{\vskip2pt\hrule\vskip5pt}
\floatsetup[algorithm]{capposition=top,precode=algprecode,postcode=lowrule,midcode=algmidcode,heightadjust=all}
\captionsetup[algorithm]{labelfont=bf,labelsep=capspace,justification=raggedright,singlelinecheck=false}
\numberwithin{algorithm}{section}

\floatsetup[table]{capposition=top}
\captionsetup[table]{labelfont=bf,labelsep=capspace}
\DeclareCaptionSubType[alph]{table}
\captionsetup[subtable]{labelformat=parens,font=small,labelfont=normalfont,labelsep=space}
\numberwithin{table}{section}