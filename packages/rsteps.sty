\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{rsteps}
\RequirePackage{enumitem}
\RequirePackage{kvoptions}

\SetupKeyvalOptions{
    family=STP,
    prefix=STP@
}

\DeclareStringOption[1ex]{linespacing}
\DeclareStringOption[.5em]{labelsep}
\DeclareStringOption[2em]{textindent}
\DeclareStringOption[1em]{partopsep}

\ProcessKeyvalOptions*

\newlist{steps}{enumerate}{4}
\setlist[steps,1]{label=\arabic*.,ref=\arabic*,
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,partopsep=\STP@partopsep,parsep=\STP@linespacing}
\setlist[steps,2]{label=(\alph*),ref=\thestepsi(\alph*),
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,parsep=\STP@linespacing}
\setlist[steps,3]{label=\roman*.,ref=\thestepsii\roman*,
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,parsep=\STP@linespacing}
\setlist[steps,4]{label=(\alph*),ref=\thestepsiii(\alph*),
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,parsep=\STP@linespacing}

\newlist{steps*}{itemize}{4}
\setlist[steps*,1]{label=\textbullet,
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,partopsep=\STP@partopsep,parsep=\STP@linespacing}
\setlist[steps*,2]{label=\textendash,
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,parsep=\STP@linespacing}
\setlist[steps*,3]{label=\textasteriskcentered,
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,parsep=\STP@linespacing}
\setlist[steps*,4]{label=$\circ$,
    labelindent=0pt,labelsep=\STP@labelsep,leftmargin=\STP@textindent,labelwidth=!,
    itemsep=0pt,topsep=0pt,parsep=\STP@linespacing}

\newlist{steps0}{description}{1}
\setlist[steps0,1]{leftmargin=0pt,labelsep=0pt,
    itemsep=0pt,topsep=0pt,partopsep=\STP@partopsep,parsep=\STP@linespacing}